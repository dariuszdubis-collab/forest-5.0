{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Logging Event Schema",
  "type": "object",
  "properties": {
    "timestamp": {"type": "string", "format": "date-time"},
    "level": {"type": "string"},
    "symbol": {"type": "string"},
    "action": {"type": "string"},
    "side": {"type": "string"},
    "qty": {"type": "number"},
    "price": {"type": "number"},
    "latency_ms": {"type": "number"},
    "error": {"type": ["string", "null"]},
    "context": {"type": ["object", "null"]},
    "decision": {
      "type": ["object", "null"],
      "properties": {
        "votes": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "source": {"type": "string"},
              "direction": {"type": ["string", "number"]},
              "weight": {"type": "number"},
              "score": {"type": "number"}
            },
            "required": ["source", "direction", "weight", "score"]
          }
        },
        "weight_sum": {"type": "number"}
      },
      "required": ["votes", "weight_sum"]
    }
  },
  "required": [
    "timestamp",
    "level",
    "symbol",
    "action",
    "side",
    "qty",
    "price",
    "latency_ms",
    "error",
    "context"
  ]
}
